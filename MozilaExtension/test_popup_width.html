<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firefox Popup Width Test</title>
    <link rel="stylesheet" href="popup.css">
    <style>
        body {
            margin: 20px;
            background: #f0f0f0;
        }
        .test-info {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-info h2 {
            color: #333;
            margin-bottom: 10px;
        }
        .popup-preview {
            border: 2px solid #ccc;
            border-radius: 8px;
            overflow: hidden;
            display: inline-block;
            background: white;
        }
        .width-display {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h2>ü¶ä Firefox Popup Width Test</h2>
        <p><strong>Expected Width:</strong> 400px</p>
        <p><strong>Current Width:</strong> <span id="currentWidth">Calculating...</span></p>
        <p><strong>Status:</strong> <span id="status">Testing...</span></p>
    </div>

    <div class="popup-preview">
        <div class="container">
            <div class="header">
                <h1>üé¨ Universal Media Downloader</h1>
                <p>Detect and Download all types of media files</p>
                <div class="stats">
                    üéØ <span id="streamCount">3</span> streams detected
                </div>
            </div>
            
            <div class="controls">
                <button class="btn btn-secondary">
                    üîÑ Refresh
                </button>
                <button class="btn btn-danger">
                    üóëÔ∏è Clear All
                </button>
                <div class="settings">
                    <label>Downloads:</label>
                    <select>
                        <option>5</option>
                    </select>
                </div>
            </div>
            
            <div class="content">
                <div class="streams-list">
                    <div class="stream-item">
                        <div class="stream-header">
                            <div class="stream-url">https://example.com/video.mp4</div>
                            <div class="stream-status status-detected">Detected</div>
                        </div>
                        <div class="stream-info">
                            <span><strong>Type:</strong> Video (MP4)</span>
                            <span><strong>Size:</strong> 15.2 MB</span>
                        </div>
                        <div class="stream-actions">
                            <input type="text" class="filename-input" value="sample_video">
                            <button class="btn btn-primary">üì• Download</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="footer">
                <p class="help-text">
                    Browse to detect media files automatically
                </p>
            </div>
        </div>
    </div>

    <div class="width-display" id="widthDisplay">
        Width: Calculating...
    </div>

    <script>
        function updateWidthInfo() {
            const container = document.querySelector('.container');
            const body = document.body;
            const html = document.documentElement;
            
            const containerWidth = container ? container.offsetWidth : 0;
            const bodyWidth = body.offsetWidth;
            const htmlWidth = html.offsetWidth;
            
            document.getElementById('currentWidth').textContent = `Container: ${containerWidth}px, Body: ${bodyWidth}px, HTML: ${htmlWidth}px`;
            document.getElementById('widthDisplay').textContent = `Container: ${containerWidth}px`;
            
            // Status check
            if (containerWidth >= 380 && containerWidth <= 390) {
                document.getElementById('status').innerHTML = '<span style="color: green;">‚úÖ Perfect! Extension will work correctly in Firefox</span>';
            } else if (containerWidth < 50) {
                document.getElementById('status').innerHTML = '<span style="color: red;">‚ùå Width too narrow - CSS issue detected</span>';
            } else {
                document.getElementById('status').innerHTML = '<span style="color: orange;">‚ö†Ô∏è Width unexpected - may need adjustment</span>';
            }
        }
        
        // Update width info immediately and on resize
        updateWidthInfo();
        window.addEventListener('resize', updateWidthInfo);
        
        // Check if this is Firefox
        if (navigator.userAgent.includes('Firefox')) {
            console.log('ü¶ä Firefox detected - testing popup width...');
        } else {
            document.querySelector('.test-info').innerHTML += 
                '<p style="color: orange;"><strong>Note:</strong> This test is designed for Firefox. Open in Firefox for accurate results.</p>';
        }
    </script>
</body>
</html> 